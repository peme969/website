<div id="theme-switcher" style="position: fixed; bottom: 10px; right: 10px; z-index: 1000;">
  <button id="theme-switcher-btn" style="background: none; border: none; cursor: pointer; font-size: 24px; color: var(--color-neutral-900);">
    ðŸŽ¨
  </button>
  <ul id="theme-dropdown" style="display: none;" class="theme-dropdown">
    <li data-theme="avocado" class="theme-item">Avocado</li>
    <li data-theme="noir" class="theme-item">Noir</li>
    <li data-theme="ocean" class="theme-item">Ocean</li>
    <li data-theme="fire" class="theme-item">Fire</li>
    <li data-theme="marvel" class="theme-item">Marvel</li>
    <li data-theme="forest" class="theme-item">Forest</li>
    <li data-theme="autumn" class="theme-item">Autumn</li>
    <li data-theme="neon" class="theme-item">Neon</li>
  </ul>
</div>
<script>
  const themes = ["avocado", "noir", "ocean", "fire", "marvel", "forest", "autumn", "neon"];
  let currentTheme = localStorage.getItem("theme") || "avocado";

  const applyTheme = (theme) => {
    document.documentElement.setAttribute("data-theme", theme);
    localStorage.setItem("theme", theme);

    // Update the active theme in the dropdown
    document.querySelectorAll(".theme-item").forEach((item) => {
      item.style.textDecoration = item.getAttribute("data-theme") === theme ? "underline" : "none";
      item.style.fontWeight = item.getAttribute("data-theme") === theme ? "bold" : "normal";
    });
  };

  // Initialize the current theme
  applyTheme(currentTheme);

  const switcherBtn = document.getElementById("theme-switcher-btn");
  const dropdown = document.getElementById("theme-dropdown");

  // Show dropdown
  const openDropdown = () => {
    dropdown.classList.remove("close");
    dropdown.classList.add("open");
    dropdown.style.display = "block";
  };

  // Hide dropdown
  const closeDropdown = () => {
    dropdown.classList.remove("open");
    dropdown.classList.add("close");
    setTimeout(() => {
      dropdown.style.display = "none";
    }, 300); // Match the duration in the CSS transition
  };

  // Toggle dropdown visibility
  switcherBtn.addEventListener("click", () => {
    if (dropdown.classList.contains("open")) {
      closeDropdown();
    } else {
      openDropdown();
    }
  });

  // Handle theme selection
  dropdown.addEventListener("click", (e) => {
    if (e.target.tagName === "LI") {
      const selectedTheme = e.target.getAttribute("data-theme");
      applyTheme(selectedTheme);
      closeDropdown();
    }
  });

  // Close dropdown when clicking outside
  document.addEventListener("click", (e) => {
    if (!document.getElementById("theme-switcher").contains(e.target)) {
      closeDropdown();
    }
  });

  // Add touch events for mobile
  document.addEventListener("touchstart", (e) => {
    if (!document.getElementById("theme-switcher").contains(e.target)) {
      closeDropdown();
    }
  });
</script>